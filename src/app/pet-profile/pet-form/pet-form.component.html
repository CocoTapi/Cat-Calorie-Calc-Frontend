<app-card [title]="title()" >
    <form [formGroup]="petProfileForm" (ngSubmit)="onSubmit()" class="form">

        <!-- Type Selection -->
        <section class="form__type">
            <mat-button-toggle-group aria-label="type" formControlName="type">
                <mat-button-toggle value="cat">Cat</mat-button-toggle>
                <mat-button-toggle value="dog">dog</mat-button-toggle>
            </mat-button-toggle-group>
        </section>

        <!-- Name Input -->
        <section class="form__name">
            <label for="name" class="form__name__title">Name :</label>
            <input type="text" id="name" name="name" formControlName="name" />
        </section>

        <!-- Birthday Input -->
        <section class="form__birthday">
            <label for="birthday" class="form__birthday__title">Birthday :</label>
            <mat-form-field>
                <mat-label>Choose a date</mat-label>
                <input matInput [matDatepicker]="picker" formControlName="birthday">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </section>

        <!-- Weight Input -->
        <section class="form__weight">
            <label for="weight" class="form__weight__title">Weight :</label>
            <input type="text" id="weight" name="weight" formControlName="weight" />

            <!-- Unit Selection -->
            <div class="form__weight__unit">
                <mat-button-toggle-group aria-label="weight_unit" formControlName="weight_unit">
                    <mat-button-toggle value="lb">lb</mat-button-toggle>
                    <mat-button-toggle value="kg">kg</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </section>

        <!-- Food Allergies Input-->
        <section class="form__allergies">
            <label for="allergies" class="form__allergies__title">Food Allergies :</label>
            <input type="text" id="allergies" name="allergies" formControlName="allergies" />
        </section>

        <!-- Medication Input -->
        <section class="form__medications">
            <p class="form__medications__title">Medications :</p>
            <ul formArrayName="medications" class="form__medications__content">
                @for (med of medications.controls; track med; let idx = $index){
                    <li [formGroupName]="idx" class="form__medications__content__item">
                        <label for="med_name">Name :</label>
                        <input type="text" id="med_name" name="med_name" formControlName="med_name" />
    
                        <label for="directions">Directions :</label>
                        <input type="text" id="directions" name="directions" formControlName="directions" />

                        <button type="button" (click)="removeMedication(idx)" class="btn">
                            <mat-icon>cancel</mat-icon>
                        </button>
                    </li>
                    }
            </ul>
            <button type="button" (click)="addMedication()" class="btn form__medications__btn">
                <mat-icon>add_circle</mat-icon>
                <span>Add</span>
            </button>
        </section>

        <!-- Goal Selection -->
        <section class="form__goal">
            <label for="goal" class="form__goal__title">Goal :</label>
            <div class="form__section__goal__target">
                <select name="goal" id="goal" formControlName="goal">
                    <option value="Maintain">Maintain</option>
                    <option value="Lose">Lose</option>
                    <option value="Gain">Gain</option>
                </select>
                <p>weight</p>
            </div>

                <!-- Target Weight Input -->
            <div class="form__section__goal__weight">
                <label for="target_weight" class="form__section__title">Target Weight :</label>
                <div>
                    <input type="text" id="target_weight" name="target_weight" formControlName="target_weight" />
                    <p>{{ unit }}</p>
                </div>
            </div>  
        </section>

        <!-- Dairy Calories Setting -->
        <section class="form__calories">
            <p class="form__calories__title">Daily Calories :</p>
            <div class="form__calories__info">
                <p>
                    We use Resting Energy Requirement (RER)
                </p>
                <a
                    href="https://vmc.vet.osu.edu/services/companion-animal-nutrition-support-service"><mat-icon>info</mat-icon></a>
            </div>

            <!-- Factor Input -->
            <div class="form__calories__factor">
            <label for="factor">Factor based on your goal :</label>
            <input type="text" name="factor" id="factor" formControlName="factor" />
            </div>

            <!-- Calories Input -->
            <div class="form__calories__daily">
                <label for="daily__calories__daily__title">Calories :</label>
                    <input type="text" name="daily_calories" id="daily_calories" formControlName="daily_calories" />
                    <p>kcal / day</p>
            </div>
        </section>

        <button>Submit</button>
    </form>
</app-card>