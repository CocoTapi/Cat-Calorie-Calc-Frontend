<app-card [title]="title()">
    <form [formGroup]="petProfileForm" (ngSubmit)="onSubmit()" class="form">

        <!-- Type Selection -->
        <section>
            <mat-button-toggle-group aria-label="type" formControlName="type">
                <mat-button-toggle value="cat">Cat</mat-button-toggle>
                <mat-button-toggle value="dog">dog</mat-button-toggle>
            </mat-button-toggle-group>
        </section>

        <!-- Name Input -->
        <section>
            <label for="name">Name :</label>
            <input type="text" id="name" name="name" formControlName="name" />
        </section>

        <!-- Birthday Input -->
        <section>
            <label for="birthday">Birthday :</label>
            <mat-form-field>
                <mat-label>Choose a date</mat-label>
                <input matInput [matDatepicker]="picker" formControlName="birthday">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
        </section>

        <!-- Weight Input -->    
        <section>
            <label for="weight">Weight :</label>
            <input type="text" id="weight" name="weight" formControlName="weight" />

            <!-- Unit Selection -->
            <div>
                <mat-button-toggle-group aria-label="weight_unit" formControlName="weight_unit">
                    <mat-button-toggle value="lb">lb</mat-button-toggle>
                    <mat-button-toggle value="kg">kg</mat-button-toggle>
                </mat-button-toggle-group>
            </div>
        </section>

        <!-- Food Allergies Input-->
        <section>
            <label for="name">Food Allergies :</label>
            <input type="text" id="name" name="name" formControlName="name" />
        </section>

        <!-- Medication Input -->
        <section>
            <p>Medications :</p>
            <div formArrayName="medications">
                @for (med of medications.controls; track med;  let idx = $index){
                    <div [formGroupName]="idx">
                        <label for="meds_name">Name :</label>
                        <input type="text" id="med_name" name="med_name" formControlName="med_name" />
            
                        <label for="directions">Directions :</label>
                        <input type="text" id="directions" name="directions" formControlName="directions" />
                        <button type="button" (click)="removeMedication(idx)">Remove</button>
                    </div>
                }
                <button type="button" (click)="addMedication()">Add</button>
            </div> 
        </section>

        <!-- Goal Selection -->
        <section>
            <label for="goal">Goal :</label>
            <div>
                <select name="goal" id="goal" formControlName="goal">
                    <option value="Maintain">Maintain</option>
                    <option value="Lose">Lose</option>
                    <option value="Gain">Gain</option>
                </select>
                <p>weight</p>
            </div>

            <!-- Target Weight Input -->
            <div>
                <label for="target_weight">Target Weight :</label>
                <div>
                    <input type="text" id="target_weight" name="target_weight" formControlName="target_weight"/>
                    <p>{{ unit }}</p>
                </div>
            </div> 
        </section>

        <!-- Dairy Calories Setting -->
        <section>
            <p>Daily Calories :</p>
            <p>
                We use Resting Energy Requirement (RER)
                <a href="https://vmc.vet.osu.edu/services/companion-animal-nutrition-support-service"><mat-icon>info</mat-icon></a>
            </p>

            <!-- Factor Input -->
            <label for="factor">Factor based on your goal :</label>
            <input type="text" name="factor" id="factor" formControlName="factor" />

            <!-- Calories Input -->
            <label for="daily_calories">Calories :</label>
            <div>
                <input type="text" name="daily_calories" id="daily_calories" formControlName="daily_calories" />
                <p>kcal / day</p>
            </div> 
        </section>

        <button>Submit</button>
    </form>
</app-card>